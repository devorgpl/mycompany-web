<div class="lists row">
  <div class="col-md-12 col-lg-12">
    <div>
      <form [formGroup]="uploadForm"
            (ngSubmit)="onSubmit()">
        <div>
          <input type="file"
                 name="profile"
                 (change)="onFileSelect($event)"/>
        </div>
        <div>
          <button type="submit">Upload</button>
        </div>
      </form>
    </div>
    <nb-card class="list-card"
             size="giant">
      <nb-card-header>Conversion</nb-card-header>
      <nb-card-body>
        <nb-accordion>
          <nb-accordion-item *ngFor="let item of converts; index as i">
            <nb-accordion-item-header>
              <div class="item-body row"
                   style="flex: 1;">
                <div class="col-6">
                  {{item.name}} &nbsp;<i>{{item.global_status}}</i>
                </div>
                <div class="col-2 offset-4">
                  <i>{{item.date_created| date}}</i>
                </div>
              </div>
            </nb-accordion-item-header>
            <nb-accordion-item-body>
              <div class="buttons-row">
                <button nbButton
                        size="small"
                        (click)="executeParse(item.id)">
                  Parse
                </button>
                <button nbButton
                        size="small"
                        (click)="executeGenerate(item.id)">
                  Convert
                </button>
              </div>
              <nb-list>
                <nb-list-item *ngFor="let comp of item.components">
                  <div class="item-body row">
                    <div class="col-4">
                      {{ comp.filename }}
                    </div>
                    <div class="col-1">
                      {{ comp.status }}
                    </div>
                    <div class="col-2 offset-5">
                      <button *ngIf="comp.type === 'file'"
                              nbButton
                              size="small"
                              (click)="executeDownload(item.id, comp.role)">
                        Download
                      </button>
                    </div>
                  </div>
                </nb-list-item>
              </nb-list>
            </nb-accordion-item-body>
          </nb-accordion-item>
        </nb-accordion>
      </nb-card-body>
    </nb-card>
  </div>
</div>


